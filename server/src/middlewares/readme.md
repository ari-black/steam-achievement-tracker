global typed error handling middleware